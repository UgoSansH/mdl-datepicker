!function(window){"use strict";"undefined"==typeof window.epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),"undefined"==typeof epepite.DatePicker.Translations&&(epepite.DatePicker.Translations={}),epepite.DatePicker.Translations.en={close:"Close",day:"Day",month:"Month",header:{year_next:"Next year",year_prev:"Previous year %year%"},days:["Sunday","Monday","Thuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]}}(window),function(window){"use strict";"undefined"==typeof window.epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),"undefined"==typeof epepite.DatePicker.Translations&&(epepite.DatePicker.Translations={}),epepite.DatePicker.Translations.fr={close:"Fermer",booking:"Réservation",reserve:"Réservé",travel:"Trajet",travel_time:"Temps de trajet",day:"Jour",month:"Mois",header:{year_next:"Année suivante",year_prev:"Année précédente %year%"},days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]}}(window),function(window){"use strict";"undefined"==typeof window.epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),"undefined"==typeof epepite.DatePicker.TEMPLATES&&(epepite.DatePicker.TEMPLATES={}),epepite.DatePicker.TEMPLATES["default"]='<div class="mdl-calendar__header"><div class="mdl-calendar__header-year"><button type="button" name="mdl-calendar-year-prev" class="%YEAR_PREV_CLASS% %IS_VISIBLE% mdl-calendar__year--button left mdl-calendar__button"><i class="icon material-icons"><</i></button><p class="%YEAR_CLASS%">2016</p><button type="button" name="mdl-calendar-year-next" class="%YEAR_NEXT_CLASS% %IS_VISIBLE% mdl-calendar__year--button right mdl-calendar__button"><i class="icon material-icons">></i></button></div><p class="mdl-calendar__header-fulldate %TEXT_DATE_CLASS%">Mercredi 16 Mars</p></div><div class="mdl-calendar__body"><div class="mdl-calendar__body-month"><button type="button" name="mdl-calendar__month--prev" class="%MONTH_PREV_CLASS% %IS_VISIBLE% mdl-calendar__button"><i class="icon material-icons"><</i></button><p class="mdl-calendar__body-month-title"><span class="%MONTH_CLASS%">Mars</span> <span class="%YEAR_CLASS%">2016</span></p><button type="button" name="mdl-calenda__month--next" class="%MONTH_NEXT_CLASS% %IS_VISIBLE% mdl-calendar__button"><i class="icon material-icons">></i></button></div><div class="%WEEK_LABELS_CLASS%"><div class="%WEEK_CLASS% %WEEK_LABELS_CLASS%"><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">L</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">M</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">M</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">J</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">V</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">S</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">D</span></div></div><div class="%DAY_CONTAINER_CLASS%"></div></div></div>'}(window),function(window){"use strict";"undefined"==typeof window.epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),"undefined"==typeof epepite.DatePicker.TEMPLATES&&(epepite.DatePicker.TEMPLATES={}),epepite.DatePicker.TEMPLATES.material='<div class="mdl-calendar__header"><div class="mdl-calendar__header-year"><button type="button" name="mdl-calendar-year-prev" class="%YEAR_PREV_CLASS% %IS_VISIBLE% mdl-calendar__year--button left mdl-calendar__button"><i class="icon material-icons">keyboard_arrow_left</i></button><p class="%YEAR_CLASS%">2016</p><button type="button" name="mdl-calendar-year-next" class="%YEAR_NEXT_CLASS% %IS_VISIBLE% mdl-calendar__year--button right mdl-calendar__button"><i class="icon material-icons">keyboard_arrow_right</i></button></div><p class="mdl-calendar__header-fulldate %TEXT_DATE_CLASS%">Mercredi 16 Mars</p></div><div class="mdl-calendar__body"><div class="mdl-calendar__body-month"><button type="button" name="mdl-calendar__month--prev" class="%MONTH_PREV_CLASS% %IS_VISIBLE% mdl-calendar__button"><i class="icon material-icons">keyboard_arrow_left</i></button><p class="mdl-calendar__body-month-title"><span class="%MONTH_CLASS%">Mars</span> <span class="%YEAR_CLASS%">2016</span></p><button type="button" name="mdl-calenda__month--next" class="%MONTH_NEXT_CLASS% %IS_VISIBLE% mdl-calendar__button"><i class="icon material-icons">keyboard_arrow_right</i></button></div><div class="%WEEK_LABELS_CLASS%"><div class="%WEEK_CLASS% %WEEK_LABELS_CLASS%"><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">L</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">M</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">M</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">J</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">V</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">S</span><span class="%WEEK_ITEM_CLASS% %WEEK_LABEL_CLASS%">D</span></div></div><div class="%DAY_CONTAINER_CLASS%"></div></div></div>'}(window),function(){"use strict";"undefined"==typeof epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),epepite.DatePicker.BookingDay=function(container,date,booking,translator){this.container=container,this.date=null,this.booking=booking,this.translator=translator||new epepite.DatePicker.Translator,this.helper=epepite.DatePicker.Helper,this.element=null,this.listeners=new Array,this.config={height_interval:30,grid_start:"00:00",grid_end:"23:30",icon_close:"close",merge_travel:!0,title:"Disponibilités",material_icons:!0},this.onSelectHour=null,"string"==typeof date?this.date=this.helper.dateFromString(date):this.date=date,this.render()},epepite.DatePicker.BookingDay.prototype.CssClasses_={CONTAINER:"mdl-calendar__booking",HEADER:"mdl-calendar__booking-header",HEADER_TITLE:"mdl-calendar__booking-header-title",BTN_CLOSE:"mdl-calendar__booking-close",GRID:"mdl-calendar__booking-grid",GRID_ITEM:"booking-grid__item",SELECTABLE_ITEM:"booking-grid__item-selectable",HOUR_ITEM:"booking-grid__item-hour",GRID_ITEM_HOUR:"booking-grid__item--hour",GRID_ITEM_HALF:"booking-grid__item--half-hour",EVENTS:"mdl-calendar__booking-events",EVENT:"mdl-calendar__booking-event",EVENT_TRAVEL:"mdl-calendar__booking-event--travel",EVENT_TITLE:"mdl-calendar__booking-event-title",BUTTON:"mdl-button",BUTTON_COLORED:"mdl-button--colored",ICON:"material-icons",IS_VISIBLE:"is-visible"},epepite.DatePicker.BookingDay.prototype.open=function(){this.element&&this.element.classList.add(this.CssClasses_.IS_VISIBLE)},epepite.DatePicker.BookingDay.prototype.close=function(){this.element&&this.element.classList.remove(this.CssClasses_.IS_VISIBLE)},epepite.DatePicker.BookingDay.prototype.render=function(){if(!this.element&&this.booking){this.element=document.createElement("div");var header=document.createElement("div"),title=document.createElement("h4"),events=document.createElement("div"),grid=this.renderGrid(),bookings=this.renderBookings();this.element.classList.add(this.CssClasses_.CONTAINER),header.classList.add(this.CssClasses_.HEADER),events.classList.add(this.CssClasses_.EVENTS),title.classList.add(this.CssClasses_.HEADER_TITLE),title.appendChild(document.createTextNode(this.config.title)),header.appendChild(title),this.element.appendChild(header),this.element.appendChild(grid),bookings&&this.element.appendChild(bookings),this.container.appendChild(this.element)}},epepite.DatePicker.BookingDay.prototype.renderGrid=function(){var hourStart={hour:0,min:0},hourEnd={hour:23,min:30};this.booking&&(hourStart=this.helper.hourSplit(this.booking.hours.start),hourEnd=this.helper.hourSplit(this.booking.hours.end),0==hourEnd.hour&&(hourEnd.hour=23,0==hourEnd.min&&(hourEnd.min=30)));for(var start=Math.abs(2*hourStart.hour),length=start+2*(hourEnd.hour-hourStart.hour)+(hourStart.min>0?1:0),grid=document.createElement("div"),handler=this.dispatch.bind(this),i=start;length>=i;i++){var hourItem={hour:hourStart.hour+(i%2==0?i/2:Math.round(i/2)-1),min:i%2==0?0:30},item=document.createElement("div"),selectable=document.createElement("div"),hour=document.createElement("div"),hourItem={hour:i%2==0?i/2:Math.round(i/2)-1,min:i%2==0?0:30};hour.classList.add(this.CssClasses_.HOUR_ITEM),hour.appendChild(document.createTextNode(this.helper.hourSplitFromString(hourItem))),selectable.classList.add(this.CssClasses_.SELECTABLE_ITEM),selectable.dataset.datetime=this.booking.date+"T"+this.helper.hourSplitFromString(hourItem),item.classList.add(this.CssClasses_.GRID_ITEM),hourItem.min>0?item.classList.add(this.CssClasses_.GRID_ITEM_HALF):item.classList.add(this.CssClasses_.GRID_ITEM_HOUR),item.appendChild(hour),item.appendChild(selectable),grid.classList.add(this.CssClasses_.GRID),grid.appendChild(item),selectable.addEventListener("click",handler)}return grid},epepite.DatePicker.BookingDay.prototype.renderBookings=function(){if(this.booking&&this.booking.events){for(var container=document.createElement("div"),i=0;i<this.booking.events.length;i++){this.booking.events[i];this.renderEvent(this.booking.events[i],container)}return container.classList.add(this.CssClasses_.EVENTS),container}return null},epepite.DatePicker.BookingDay.prototype.renderEvent=function(entity,container){var hourStart=this.helper.hourSplit(entity.start),hourEnd=this.helper.hourSplit(entity.end),hourTravel=this.helper.hourSplit(entity.travel_time);this.config.merge_travel?container.appendChild(this.renderBooking(hourStart,hourEnd,entity,hourTravel)):(container.appendChild(this.renderTravel(hourStart,hourEnd,entity)),container.appendChild(this.renderBooking(hourStart,hourEnd,entity)),container.appendChild(this.renderTravel(hourStart,hourEnd,entity)))},epepite.DatePicker.BookingDay.prototype.renderBooking=function(start,end,entity,travel){var element=document.createElement("div"),titleElement=document.createElement("div"),position=this.getBookingPosition(start,end,travel);return travel&&this.helper.getHourStart(start,travel),titleElement.classList.add(this.CssClasses_.EVENT_TITLE),titleElement.appendChild(document.createTextNode(entity.title)),element.appendChild(titleElement),element.classList.add(this.CssClasses_.EVENT),element.dataset.event=entity.id,element.style.top=""+position.top+"px",element.style.height=""+position.height+"px",element},epepite.DatePicker.BookingDay.prototype.renderTravel=function(start,end,entity){entity.title=this.translator.trans("travel_time");var element=this.renderBooking(start,end,entity);return element.classList.add(this.CssClasses_.EVENT_TRAVEL),element},epepite.DatePicker.BookingDay.prototype.addEvent=function(event){this.booking.events.push(event);var container=this.container.querySelector("."+this.CssClasses_.EVENTS);return this.renderEvent(event,container),this},epepite.DatePicker.BookingDay.prototype.removeEvent=function(id){if(this.booking&&this.booking.events){var key=this.findEventKey(id);null!==key&&this.booking.events.slice(key,1)}if(this.container){var bookings=this.container.querySelector("."+this.CssClasses_.EVENTS);if(bookings){var booking=bookings.querySelector("."+this.CssClasses_.EVENT+'[data-event="'+id+'"]');booking&&booking.parentNode.removeChild(booking)}}},epepite.DatePicker.BookingDay.prototype.hasEvent=function(time){var timeMin=this.helper.getHourToMin(time);if(this.booking&&this.booking.events)for(var i=0;i<this.booking.events.length;i++){var bookingMinStart=this.helper.getHourToMin(this.booking.events[i].start),bookingMinEnd=this.helper.getHourToMin(this.booking.events[i].end);if(bookingMinStart>=timeMin&&timeMin>=bookingMinEnd)return!0}return!1},epepite.DatePicker.BookingDay.prototype.length=function(){return this.booking&&this.booking.events?this.booking.events.length:0},epepite.DatePicker.BookingDay.prototype.isAvailable=function(){return this.booking.available},epepite.DatePicker.BookingDay.prototype.findEventKey=function(id){if(this.booking&&this.booking.events)for(var i=0;i<this.booking.events.length;i++)if(this.booking.events[i].id==id)return i;return null},epepite.DatePicker.BookingDay.prototype.getBookingPosition=function(start,end,travel){travel&&(start=this.helper.getHourStart(start,travel));var gridStart=this.helper.getHourToMin(this.helper.hourSplit(this.booking.hours.start)),minStart=this.helper.getHourToMin(start),heightInterval=this.config.height_interval/30,minDuration=this.helper.getMinDuration(start,end,travel);return{top:minStart*heightInterval-gridStart*heightInterval,height:minDuration*heightInterval}},epepite.DatePicker.BookingDay.prototype.dispatch=function(event){for(var date=event.target.dataset.datetime,i=0;i<this.listeners.length;i++){var callback=this.listeners[i];callback(date)}},epepite.DatePicker.BookingDay.prototype.onChange=function(listener){this.listeners.push(listener)}}(),function(){"use strict";"undefined"==typeof epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),epepite.DatePicker.Booking=function(calendar,events){this.calendar=calendar,this.events=events,this.days=new Map,this.container=null,this.onDate=null,this.onOpenDate=null,this.onCloseDate=null},epepite.DatePicker.Booking.prototype.hasEvent=function(date){return this.days.has(date)}}(),function(window){"use strict";"undefined"==typeof window.epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),epepite.DatePicker.Calendar=function(config,translator,templating,unavailabilities){if(this.date=null,this.oldDate=null,this.cursorDate=null,this.container=null,this.element=null,this.templating=templating,this.translator=translator,this.events=new Map,this.config={container:null,locale:navigator&&navigator.language?navigator.language:"en",date:null,min_date:null,max_date:null,format:"dd/mm/YY",template:"material",show:!0},config)for(var key in config)this.config.hasOwnProperty(key)&&(this.config[key]=config[key]);if(this.config.date?this.config.date instanceof Date?this.date=this.config.date:this.date=new Date(this.config.date):this.date=new Date,this.cursorDate=new Date(this.date.getTime()),this.container="string"==typeof this.config.container?document.querySelector(this.config.container):this.config.container,this.templating=templating||new epepite.DatePicker.Template,this.translator=translator||new epepite.DatePicker.Translator,this.translator.setCurrentLocale(this.config.locale),!this.container)throw'Not found withouth datepicker container element "'+this.config.container+'"';if("undefined"==typeof epepite.DatePicker.TEMPLATES[this.config.template])throw'Undefined template "'+this.config.template+'"';this.renderElement(),this.config.show&&this.show(),this.dispatch("load")},epepite.DatePicker.Calendar.prototype.show=function(){this.element&&this.element.classList.add(epepite.DatePicker.CONSTANTS.IS_VISIBLE),this.dispatch("show")},epepite.DatePicker.Calendar.prototype.hide=function(){this.element&&this.element.classList.remove(epepite.DatePicker.CONSTANTS.IS_VISIBLE),this.dispatch("hide")},epepite.DatePicker.Calendar.prototype.isVisible=function(){return this.element?this.element.classList.contains(epepite.DatePicker.CONSTANTS.IS_VISIBLE):!1},epepite.DatePicker.Calendar.prototype.refresh=function(){if(this.renderMetadata(),!this.oldDate||this.cursorDate.getFullYear()!=this.oldDate.getFullYear()||this.cursorDate.getMonth()!=this.oldDate.getMonth()){var constants=epepite.DatePicker.CONSTANTS;this.renderGridMonth(),this.oldDate=new Date(this.cursorDate.getTime()),this.config.min_date&&(this.cursorDate.getFullYear()<=this.config.min_date.getFullYear()?(this.element.querySelector("."+constants.YEAR_PREV_CLASS).classList.remove(constants.IS_VISIBLE),this.cursorDate.getMonth()<=this.config.min_date.getMonth()?this.element.querySelector("."+constants.MONTH_PREV_CLASS).classList.remove(constants.IS_VISIBLE):this.element.querySelector("."+constants.MONTH_PREV_CLASS).classList.add(constants.IS_VISIBLE)):this.element.querySelector("."+constants.YEAR_PREV_CLASS).classList.add(constants.IS_VISIBLE)),this.config.max_date&&(this.cursorDate.getFullYear()>=this.config.max_date.getFullYear()?(this.element.querySelector("."+constants.YEAR_NEXT_CLASS).classList.remove(constants.IS_VISIBLE),this.cursorDate.getMonth()>=this.config.max_date.getMonth()?this.element.querySelector("."+constants.MONTH_NEXT_CLASS).classList.remove(constants.IS_VISIBLE):this.element.querySelector("."+constants.MONTH_NEXT_CLASS).classList.add(constants.IS_VISIBLE)):this.element.querySelector("."+constants.YEAR_NEXT_CLASS).classList.add(constants.IS_VISIBLE))}},epepite.DatePicker.Calendar.prototype.bindEvents=function(){var prevYear=this.selectNotUpgraded("."+epepite.DatePicker.CONSTANTS.YEAR_PREV_CLASS),nextYear=this.selectNotUpgraded("."+epepite.DatePicker.CONSTANTS.YEAR_NEXT_CLASS),prevMonth=this.selectNotUpgraded("."+epepite.DatePicker.CONSTANTS.MONTH_PREV_CLASS),nextMonth=this.selectNotUpgraded("."+epepite.DatePicker.CONSTANTS.MONTH_NEXT_CLASS),days=this.selectNotUpgraded("."+epepite.DatePicker.CONSTANTS.DAY_CLASS+":not(."+epepite.DatePicker.CONSTANTS.IS_DISABLED+")");this.createDispatchers(prevYear,epepite.DatePicker.CONSTANTS.YEAR_PREV_EVENT),this.createDispatchers(nextYear,epepite.DatePicker.CONSTANTS.YEAR_NEXT_EVENT),this.createDispatchers(prevMonth,epepite.DatePicker.CONSTANTS.MONTH_PREV_EVENT),this.createDispatchers(nextMonth,epepite.DatePicker.CONSTANTS.MONTH_NEXT_EVENT),this.createDispatchers(days,epepite.DatePicker.CONSTANTS.DAY_EVENT)},epepite.DatePicker.Calendar.prototype.createDispatchers=function(nodes,eventName){for(var self=this,i=0;i<nodes.length;i++)nodes[i].addEventListener("click",function(event){self.dispatch(eventName,{node:this})}),nodes[i].classList.add(epepite.DatePicker.CONSTANTS.IS_UPGRADED)},epepite.DatePicker.Calendar.prototype.refreshEvents=function(){},epepite.DatePicker.Calendar.prototype.onPrevYear=function(event){this.cursorDate.setFullYear(this.cursorDate.getFullYear()-1),this.refresh()},epepite.DatePicker.Calendar.prototype.onNextYear=function(event){this.cursorDate.setFullYear(this.cursorDate.getFullYear()+1),this.refresh()},epepite.DatePicker.Calendar.prototype.onPrevMonth=function(event){this.cursorDate.setMonth(this.cursorDate.getMonth()-1),this.refresh()},epepite.DatePicker.Calendar.prototype.onNextMonth=function(event){this.cursorDate.setMonth(this.cursorDate.getMonth()+1),this.refresh()},epepite.DatePicker.Calendar.prototype.onSelectDay=function(event){for(var constants=epepite.DatePicker.CONSTANTS,node=event.detail.node,selectedDays=this.element.querySelectorAll("."+constants.DAY_CONTAINER_CLASS+" ."+constants.DAY_CLASS),i=0;i<selectedDays.length;i++)selectedDays[i].classList.remove(epepite.DatePicker.CONSTANTS.IS_SELECTED);node.classList.add(epepite.DatePicker.CONSTANTS.IS_SELECTED),this.cursorDate.setDate(node.dataset.day),this.date=new Date(this.cursorDate.getFullYear(),this.cursorDate.getMonth(),node.dataset.day),this.refresh(),this.dispatch(epepite.DatePicker.CONSTANTS.DATE_EVENT,{node:event.detail.node,date:this.date,day:node.dataset.day})},epepite.DatePicker.Calendar.prototype.renderElement=function(){if(!this.element){this.element=document.createElement("div"),this.element.classList.add(epepite.DatePicker.CONSTANTS.CALENDAR_CLASS);var template=this.templating.load(this.config.template);this.element.innerHTML=template,this.container.appendChild(this.element),this.element.addEventListener(epepite.DatePicker.CONSTANTS.YEAR_PREV_EVENT,this.onPrevYear.bind(this)),this.element.addEventListener(epepite.DatePicker.CONSTANTS.YEAR_NEXT_EVENT,this.onNextYear.bind(this)),this.element.addEventListener(epepite.DatePicker.CONSTANTS.MONTH_PREV_EVENT,this.onPrevMonth.bind(this)),this.element.addEventListener(epepite.DatePicker.CONSTANTS.MONTH_NEXT_EVENT,this.onNextMonth.bind(this)),this.element.addEventListener(epepite.DatePicker.CONSTANTS.DAY_EVENT,this.onSelectDay.bind(this)),this.refresh(),this.element.classList.add(epepite.DatePicker.CONSTANTS.IS_UPGRADED),this.dispatch("upgraded")}},epepite.DatePicker.Calendar.prototype.renderMetadata=function(){for(var constants=epepite.DatePicker.CONSTANTS,fullDates=this.element.querySelectorAll("."+constants.TEXT_DATE_CLASS),years=this.element.querySelectorAll("."+constants.YEAR_CLASS),months=this.element.querySelectorAll("."+constants.MONTH_CLASS),transDay=this.translator.trans("days"),transMonths=this.translator.trans("months"),monthText=(transDay[this.date.getDay()],transMonths[this.cursorDate.getMonth()]),fullDate=this.formatDate(this.date),i=0;i<fullDates.length;i++)fullDates[i].innerHTML=fullDate;for(var i=0;i<years.length;i++)years[i].innerHTML=this.cursorDate.getFullYear();for(var i=0;i<months.length;i++)months[i].innerHTML=monthText},epepite.DatePicker.Calendar.prototype.renderGridMonth=function(){for(var container=this.element.querySelector("."+epepite.DatePicker.CONSTANTS.DAY_CONTAINER_CLASS);container.hasChildNodes();)container.removeChild(container.lastChild);this.renderPreviousMonth(this.cursorDate,container),this.renderCurrentMonth(this.cursorDate,container),this.renderNextMonth(this.cursorDate,container),this.bindEvents()},epepite.DatePicker.Calendar.prototype.renderPreviousMonth=function(date,container){var month=new Date(date.getFullYear(),date.getMonth(),1),dayNumber=(0==month.getDay()?7:month.getDay())-1;if(dayNumber>1)for(var prevMonth=new Date(month.getFullYear(),month.getMonth(),-Math.abs(dayNumber)+1),prevMonthLast=new Date(prevMonth.getFullYear(),prevMonth.getMonth()+1,0),dayDate=new Date(prevMonth.getFullYear(),prevMonth.getMonth(),prevMonth.getDate()),i=prevMonth.getDate();i<=prevMonthLast.getDate();i++)dayDate.setDate(i),this.getContainerDay(container).appendChild(this.renderDay(dayDate,!1,!0))},epepite.DatePicker.Calendar.prototype.renderCurrentMonth=function(date,container){for(var lastDay=new Date(date.getFullYear(),date.getMonth()+1,0).getDate(),dayDate=new Date(date.getFullYear(),date.getMonth(),1),i=1;lastDay>=i;i++)dayDate.setDate(i),this.getContainerDay(container).appendChild(this.renderDay(dayDate))},epepite.DatePicker.Calendar.prototype.renderNextMonth=function(date,container){var lastDay=new Date(date.getFullYear(),date.getMonth()+1,0);if(lastDay.getDay()>0)for(var month=new Date(date.getFullYear(),date.getMonth()+1,1),dayDate=new Date(month.getFullYear(),month.getMonth(),1),dayNumber=(0==month.getDay()?7:month.getDay())-1,dayNumber=(0==month.getDay()?7:month.getDay())-1,i=1;7-dayNumber>=i;i++)dayDate.setDate(i),this.getContainerDay(container).appendChild(this.renderDay(dayDate))},epepite.DatePicker.Calendar.prototype.renderDay=function(date){var element=document.createElement("button"),today=new Date;return element.innerHTML=this.formatNumber(date.getDate()),element.dataset.day=date.getDate(),element.dataset.id=this.renderDayId(date),element.classList.add(epepite.DatePicker.CONSTANTS.WEEK_ITEM_CLASS),element.classList.add(epepite.DatePicker.CONSTANTS.DAY_CLASS),date.toDateString()==this.date.toDateString()&&element.classList.add(epepite.DatePicker.CONSTANTS.IS_SELECTED),date.toDateString()==today.toDateString()&&element.classList.add(epepite.DatePicker.CONSTANTS.DAY_TODAY_CLASS),date.getMonth()!=this.cursorDate.getMonth()&&(element.setAttribute("disable","disable"),element.classList.add(epepite.DatePicker.CONSTANTS.IS_DISABLED)),this.config.min_date&&date<this.config.min_date&&(element.setAttribute("disable","disable"),element.classList.add(epepite.DatePicker.CONSTANTS.IS_DISABLED)),this.config.max_date&&date>this.config.max_date&&(element.setAttribute("disable","disable"),element.classList.add(epepite.DatePicker.CONSTANTS.IS_DISABLED)),element},epepite.DatePicker.Calendar.prototype.renderDayId=function(date){return date.getFullYear()+"-"+this.formatNumber(date.getMonth()+1)+"-"+this.formatNumber(date.getDate())},epepite.DatePicker.Calendar.prototype.getContainerDay=function(daysContainer){var container=daysContainer.querySelector("."+epepite.DatePicker.CONSTANTS.WEEK_CLASS+":last-child");if(container){var days=container.querySelectorAll("."+epepite.DatePicker.CONSTANTS.DAY_CLASS);days&&days.length>=7&&(container=document.createElement("div"),container.classList.add(epepite.DatePicker.CONSTANTS.WEEK_CLASS),daysContainer.appendChild(container))}else container=document.createElement("div"),container.classList.add(epepite.DatePicker.CONSTANTS.WEEK_CLASS),daysContainer.appendChild(container);return container},epepite.DatePicker.Calendar.prototype.dispatch=function(name,detail){this.element&&this.element.dispatchEvent(new CustomEvent(name,{detail:detail}))},epepite.DatePicker.Calendar.prototype.on=function(event,handler){return this.element?this.element.addEventListener(event,handler):null},epepite.DatePicker.Calendar.prototype.selectNotUpgraded=function(selector){return this.element.querySelectorAll(selector+":not(."+epepite.DatePicker.CONSTANTS.IS_UPGRADED+")")},epepite.DatePicker.Calendar.prototype.formatDate=function(date){var transDay=this.translator.trans("days"),transMonths=this.translator.trans("months"),dayText=transDay[this.date.getDay()],monthText=transMonths[this.date.getMonth()];return dayText+" "+this.formatNumber(this.date.getDate())+" "+monthText},epepite.DatePicker.Calendar.prototype.formatNumber=function(number){return parseInt(number)<10?"0"+number:number},epepite.DatePicker.Calendar.prototype.getElement=function(){return this.element},epepite.DatePicker.Calendar.prototype.getDate=function(){return this.date},epepite.DatePicker.Calendar.prototype.setDate=function(date){if(!(date instanceof Date))throw"[InvalidArgument] Calendar.setDate(Date date) must be an instance of Date";return this.date=date,this.currentDate=date,this.refresh(),this},epepite.DatePicker.Calendar.prototype.setEvents=function(events){this.events=new Map;for(var key in events)events.hasOwnProperty(key)&&this.events.set(events[key].date,events[key]);return this},epepite.DatePicker.Calendar.prototype.addEvent=function(event){return this.events.set(event.date,event),this},epepite.DatePicker.Calendar.prototype.clearEvents=function(){}}(window),function(){"use strict";"undefined"==typeof epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),epepite.DatePicker.CONSTANTS={YEAR:"year",MONTH:"month",DAY:"day",PREV:"prev",NEXT:"next",NONE:"-",CALENDAR_CLASS:"mdl-calendar",YEAR_CLASS:"mdl-calendar__year",YEAR_NEXT_CLASS:"mdl-calendar__year--next",YEAR_PREV_CLASS:"mdl-calendar__year--prev",MONTH_CLASS:"mdl-calendar__month",MONTH_NEXT_CLASS:"mdl-calendar__month--next",MONTH_PREV_CLASS:"mdl-calendar__month--prev",DAY_CONTAINER_CLASS:"mdl-calendar__days",DAY_CLASS:"mdl-calendar__day",DAY_TODAY_CLASS:"mdl-calendar__day-today",DAY_SELECTED_CLASS:"mdl-calendar__day-selected",DAY_DISABLED_CLASS:"mdl-calendar__day-disabled",WEEK_ITEM_CLASS:"mdl-calendar__week-item",WEEK_CLASS:"mdl-calendar__week",WEEK_LABELS_CLASS:"mdl-calendar__week-labels",WEEK_LABEL_CLASS:"mdl-calendar__week-label",TEXT_DATE_CLASS:"mdl-calendar__text-date",ACTION_OK_CLASS:"mdl-calendar__button-ok",ACTION_CANCEL_CLASS:"mdl-calendar__action-cancel",TEMPLATE_NAME:"default",OBFUSCATOR_CLASS:"mdl-obfuscator",DATEPICKER_CLASS:"mdl-datepicker",DATEPICKER_WRAPPER_CLASS:"mdl-datepicker-wrapper",DATE_EVENT:"date_update",MONTH_PREV_EVENT:"month_prev",MONTH_NEXT_EVENT:"month_next",YEAR_PREV_EVENT:"year_prev",YEAR_NEXT_EVENT:"year_next",DAY_EVENT:"day_update",DATEPICKER_EVENT:"update",IS_VISIBLE:"is-visible",IS_DISABLED:"is-disabled",IS_SELECTED:"is-selected",IS_UPGRADED:"is-upgraded",IS_AVAILABLE:"is-available",IS_UNVAILABLE:"is-unvailable"}}(),function(window){"use strict";"undefined"==typeof window.epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),epepite.DatePicker.DatePicker=function(config,calendar){if(this.element=null,this.calendar=calendar,this.input=null,this.config={input:null,locale:navigator&&navigator.language?navigator.language:"en",format:"DD/MM/YYYY",min_date:null,max_date:null,template:"material"},config)for(var key in config)this.config.hasOwnProperty(key)&&(this.config[key]=config[key]);if(this.input="string"==typeof this.config.input?document.querySelector(this.config.input):this.config.input,!this.input)throw"Not found datepicker input";this.render(),this.bindEvents()},epepite.DatePicker.DatePicker.prototype.bindEvents=function(){this.input.addEventListener("focus",this.onFocus.bind(this)),this.element.addEventListener("click",this.onOutside.bind(this)),this.calendar.on(epepite.DatePicker.CONSTANTS.DATE_EVENT,this.onSelected.bind(this))},epepite.DatePicker.DatePicker.prototype.onFocus=function(event){this.calendar.setDate(this.getDate()),this.show()},epepite.DatePicker.DatePicker.prototype.onSelected=function(event){this.setDate(event.detail.date),this.hide();var event=new CustomEvent(epepite.DatePicker.CONSTANTS.DATEPICKER_EVENT,{detail:{date:this.getDate(),text:moment(this.getDate()).format(this.config.format),format:this.config.format}});this.element.dispatchEvent(event)},epepite.DatePicker.DatePicker.prototype.onOutside=function(event){event.target==this.element&&this.hide()},epepite.DatePicker.DatePicker.prototype.show=function(){this.element&&this.element.classList.add(epepite.DatePicker.CONSTANTS.IS_VISIBLE)},epepite.DatePicker.DatePicker.prototype.hide=function(){this.element&&this.element.classList.remove(epepite.DatePicker.CONSTANTS.IS_VISIBLE)},epepite.DatePicker.DatePicker.prototype.render=function(){this.element=document.createElement("div"),this.element.classList.add(epepite.DatePicker.CONSTANTS.DATEPICKER_WRAPPER_CLASS);var datepicker=document.createElement("div");datepicker.classList.add(epepite.DatePicker.CONSTANTS.DATEPICKER_CLASS),this.element.appendChild(datepicker),document.body.appendChild(this.element),this.calendar=new epepite.DatePicker.Calendar({locale:this.config.locale,container:this.element.querySelector("."+epepite.DatePicker.CONSTANTS.DATEPICKER_CLASS),date:this.getDate(),min_date:this.config.min_date,max_date:this.config.max_date,template:this.config.template})},epepite.DatePicker.DatePicker.prototype.setDate=function(date){return this.input.value=moment(date).format(this.config.format),this.calendar.setDate(date),this},epepite.DatePicker.DatePicker.prototype.getDate=function(){var currentDate=null;if(this.input.value){var dateMoment=moment(this.input.value,this.config.format);currentDate=dateMoment.isValid()?dateMoment.toDate():new Date}else currentDate=new Date;return currentDate},epepite.DatePicker.DatePicker.prototype.getElement=function(){return this.element},epepite.DatePicker.DatePicker.prototype.on=function(event,handler){return this.element.addEventListener(event,handler)}}(window),function(){"use strict";"undefined"==typeof epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),epepite.DatePicker.Helper={dateSplit:function(date){if(!this.isValidDate(date))throw"Invalid date format. expected YYYY-mm-dd";var info=date.split("-");return{year:parseInt(info[0]),month:parseInt(info[1]),day:parseInt(info[2])}},dateSplitFromString:function(date){return""+date.year+"-"+(date.month<10?"0":"")+date.month+"-"+(date.day<10?"0":"")+date.day},hourSplit:function(hour){if(!this.isValidHour(hour))throw"Invalid hour format. expected HH:ii";var info=hour.split(":");return{hour:parseInt(info[0]),min:parseInt(info[1])}},hourSplitFromString:function(hour){return""+(hour.hour<10?"0":"")+hour.hour+":"+(hour.min<10?"0":"")+hour.min},isValidDate:function(date){return date.match(/[0-9]{4}\-[0-9]{2}\-[0-9]{2}/)},isValidHour:function(hour){return hour.match(/[0-9]{2}:[0-9]{2}/)},dateFromString:function(date){if(!this.isValidDate(date))throw"Invalid date format. expected YYYY-mm-dd";var info=this.dateSplit(date);return new Date(info.year,info.month-1,info.day,0,0,0)},isHourUpper:function(hourBase,hour){if(!this.isValidHour(hourBase)||!this.isValidHour(hour))throw"Invalid hour format. expected HH:ii";
var infoBase=this.hourSplit(hourBase),info=this.hourSplit(hour);return info.hour>infoBase.hour?!0:info.hour==infoBase.hour?info.min>infoBase.min:!1},isHourLower:function(hourBase,hour){if(!this.isValidHour(hourBase)||!this.isValidHour(hour))throw"Invalid hour format. expected HH:ii";var infoBase=this.hourSplit(hourBase),info=this.hourSplit(hour);return info.hour<infoBase.hour?!0:info.hour==infoBase.hour?info.min<infoBase.min:!1},isHourUpperOrEqual:function(hourBase,hour){if(!this.isValidHour(hourBase)||!this.isValidHour(hour))throw"Invalid hour format. expected HH:ii";var infoBase=this.hourSplit(hourBase),info=this.hourSplit(hour);return info.hour>infoBase.hour?!0:info.hour==infoBase.hour?info.min>=infoBase.min:!1},isHourLowerOrEqual:function(hourBase,hour){if(!this.isValidHour(hourBase)||!this.isValidHour(hour))throw"Invalid hour format. expected HH:ii";var infoBase=this.hourSplit(hourBase),info=this.hourSplit(hour);return info.hour<infoBase.hour?!0:info.hour==infoBase.hour?info.min<=infoBase.min:!1},getMinDuration:function(start,end,travel){var duration=(this.getHourToMin(start),this.getHourToMin(end)-this.getHourToMin(start));return travel&&(duration+=this.getHourToMin(travel)),duration},getHourDuration:function(start,end,travel){var duration=this.getMinDuration(start,end,travel);return{hour:Math.floor(duration/60),min:duration%60}},getHourToMin:function(hour){return 60*hour.hour+hour.min},getHourStart:function(start,travel){if(travel){var duration=this.getHourToMin(start)-this.getHourToMin(travel);return{hour:Math.floor(duration/60),min:duration%60}}return start}}}(),function(){"use strict";var MaterialDatepicker=function(element){this.element_=element,this.datepicker_=null,this.init()};window.MaterialDatepicker=MaterialDatepicker,MaterialDatepicker.prototype.Constant_={},MaterialDatepicker.prototype.CssClasses_={DIRTY:"is-dirty",TEXTFIELD:"mdl-textfield",TEXTFIELD_INPUT:"mdl-textfield__input"},MaterialDatepicker.prototype.init=function(){this.element_&&(this.datepicker_=new epepite.DatePicker.DatePicker({input:this.element_,locale:navigator.language?navigator.language:"fr"}),this.datepicker_.on(epepite.DatePicker.CONSTANTS.DATEPICKER_EVENT,this.onSelectedDate.bind(this)))},MaterialDatepicker.prototype.onSelectedDate=function(event){if(this.element_.value){var textfield=this.findTextfield();textfield&&textfield.classList.add(this.CssClasses_.DIRTY)}},MaterialDatepicker.prototype.findTextfield=function(){if(this.element_.classList.contains(this.CssClasses_.TEXTFIELD_INPUT))for(var target=this.element_.parentNode;target&&target!=this.element_;target=target.parentNode)if(target.classList.contains(this.CssClasses_.TEXTFIELD))return target;return null},componentHandler.register({constructor:MaterialDatepicker,classAsString:"MaterialDatepicker",cssClass:"mdl-datepicker__input",widget:!0})}(),function(){"use strict";"undefined"==typeof epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),epepite.DatePicker.Template=function(){},epepite.DatePicker.Template.prototype.load=function(name){if("undefined"==typeof epepite.DatePicker.TEMPLATES[name])throw'Undefined template "'+name+'"';var template=epepite.DatePicker.TEMPLATES[name],constants=epepite.DatePicker.CONSTANTS;for(var key in constants)if(constants.hasOwnProperty(key)){var pattern=new RegExp("%"+key+"%","g");template=template.replace(pattern,constants[key])}return template}}(),function(window){"use strict";"undefined"==typeof window.epepite&&(window.epepite={}),"undefined"==typeof epepite.DatePicker&&(epepite.DatePicker={}),epepite.DatePicker.Translator=function(locale){if(this.locale=locale||"en_EN",this.translations={en_EN:{}},"object"==typeof epepite.DatePicker.Translations)for(var locale in epepite.DatePicker.Translations)this.setTranslation(locale,epepite.DatePicker.Translations[locale])},epepite.DatePicker.Translator.prototype.setCurrentLocale=function(locale){return this.locale=locale,this},epepite.DatePicker.Translator.prototype.getCurrentLocale=function(){return this.locale},epepite.DatePicker.Translator.prototype.setTranslation=function(locale,translations){return this.translations[locale]=translations,this},epepite.DatePicker.Translator.prototype.trans=function(message,params,locale){if(locale=locale||this.locale,"object"==typeof this.translations[locale]){var translate="";if("undefined"!=typeof this.translations[locale][message])translate=this.translations[locale][message];else{for(var domain=this.translations[locale],keys=message.split("."),i=0;i<keys.length;i++){if("undefined"==typeof domain[keys[i]])return message;domain=domain[keys[i]]}translate=domain}if("string"==typeof translate&&params)for(var key in params)params.hasOwnProperty(key)&&(translate=translate.replace(key,params[key]));return translate}return message},epepite.DatePicker.Translator.prototype.has=function(locale){return"undefined"!=typeof this.translations[locale]}}(window);
//# sourceMappingURL=app.map